---
import Layout from '../layouts/Layout.astro';
import LeadMagnet from '../components/LeadMagnet.jsx';
import BookCarousel from '../components/BookCarousel.jsx';

// 1. IMPORTAR LA "BASE DE DATOS"
import { books } from '../data/books.js';

// 2. SEPARAR LOS LIBROS POR CATEGORÍA
const sagaBooks = books.filter(book => book.category === 'saga');
const otherBooks = books.filter(book => book.category === 'independiente');

// 3. SELECCIONAR EL LIBRO PRINCIPAL PARA LA HOME (Suele ser el Libro 1)
// Buscamos el libro que tenga el slug 'a-flor-de-piel' o usamos el primero de la saga
const mainBook = sagaBooks.find(b => b.slug === 'a-flor-de-piel') || sagaBooks[0] || books[0];

// Variables estáticas para la Home
const coverImage = "/images/portada.jpg";
const amazonLink = "https://www.amazon.com/-/es/FLOR-PIEL-Spanish-Paulina-Lopez/dp/B0FNNJKR36/";
const pdfLink = "/downloads/primer-capitulo.pdf";
---

<Layout title="A Flor de Piel | Paulina López">
	
	<nav class="fixed w-full z-50 bg-midnight/90 backdrop-blur-md border-b border-white/5 py-2 transition-all duration-300">
		<div class="container mx-auto px-6 flex justify-between items-center">
			
			<a href="#" class="block">
                <img 
                src="/images/logo.png" 
                alt="Logo A Flor de Piel" 
                class="h-16 md:h-18 w-auto object-contain hover:opacity-80 transition duration-300 transform hover:scale-105" 
                />
            </a>

			<a 
				href={amazonLink} 
				target="_blank" 
				class="bg-blood text-white px-6 py-2 text-sm font-bold tracking-wider rounded-full shadow-[0_0_15px_rgba(168,0,0,0.4)] hover:bg-red-700 hover:shadow-[0_0_25px_rgba(168,0,0,0.6)] hover:-translate-y-0.5 transition-all duration-300 border border-white/10"
			>
				COMPRAR LIBRO
			</a>

		</div>
	</nav>

	<header class="relative min-h-screen flex items-center justify-center overflow-hidden">
		<div class="absolute inset-0 bg-[url('/images/forest-bg.jpg')] bg-cover bg-center opacity-40"></div>
		<div class="absolute inset-0 bg-gradient-to-t from-midnight via-midnight/80 to-transparent"></div>
		
		<div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-transparent to-transparent animate-pulse"></div>

		<div class="relative z-10 container mx-auto px-6 text-center pt-20">
			<h2 class="text-gold tracking-[0.3em] text-sm md:text-lg mb-4 opacity-0 intro-anim">EL CASTILLO HAYASHI BUSCA RECLUTAS</h2>
			
			<h1 class="font-gothic text-6xl md:text-8xl lg:text-9xl text-white mb-2 text-shadow-lg opacity-0 intro-anim translate-y-10">
				<span class="text-blood">A</span> <span class="text-blood">F</span>LOR <span class="text-blood">D</span>E <span class="text-blood">P</span>IEL
			</h1>
			
			<p class="font-body text-xl md:text-2xl text-gray-400 max-w-2xl mx-auto mb-10 opacity-0 intro-anim">
				¿Sobrevivirás al entrenamiento?
			</p>
			
			<div class="flex flex-col md:flex-row gap-6 justify-center items-center opacity-0 intro-anim mt-8">
				
				<LeadMagnet client:load pdfUrl={pdfLink} />

				<a 
					href={amazonLink} 
					target="_blank" 
					class="relative px-10 py-4 bg-gradient-to-r from-blood to-red-900 text-white font-bold tracking-widest rounded-full shadow-[0_10px_30px_rgba(168,0,0,0.4)] transition-all duration-300 hover:scale-105 hover:shadow-[0_15px_40px_rgba(168,0,0,0.6)] border-t border-white/20 overflow-hidden group"
				>
					<div class="absolute inset-0 -translate-x-full group-hover:animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/20 to-transparent z-10"></div>
					
					<span class="flex items-center gap-2 relative z-20">
						ADQUIRIR EN AMAZON 
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg>
					</span>
				</a>
			</div>
		</div>
	</header>

	<section class="py-24 bg-gradient-to-b from-black to-midnight relative border-t border-white/5">
        <div class="text-center mb-12">
            <h2 class="font-gothic text-4xl text-white mb-2">El Universo A Flor de Piel</h2>
            <p class="text-gray-500">La saga completa. La historia de los Hayashi.</p>
        </div>
        <BookCarousel client:visible books={sagaBooks} />
	</section>

    {otherBooks.length > 0 && (
        <section class="py-24 bg-midnight relative border-t border-white/5">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="font-gothic text-4xl text-gold mb-2">Otras Historias</h2>
                    <p class="text-gray-400">Nuevos mundos. La misma pluma.</p>
                </div>
                <BookCarousel client:visible books={otherBooks} />
            </div>
        </section>
    )}


    <section class="py-24 relative">
		<div class="container mx-auto px-6">
			<div class="bg-white/5 border border-white/10 p-8 md:p-12 rounded-sm grid md:grid-cols-[1fr_2fr] gap-12 items-center">
				<div class="relative">
					<div class="absolute inset-0 border-2 border-gold transform translate-x-4 translate-y-4"></div>
					<img src="/images/paulina.png" alt="Paulina López" class="relative z-10 transition duration-500 w-full object-cover shadow-xl" />
				</div>
				
				<div>
					<h3 class="font-gothic text-3xl mb-2 text-white">Paulina López</h3>
					<p class="text-blood font-bold mb-6 text-sm tracking-wider">AUTORA</p>
					<p class="text-gray-300 mb-4 leading-relaxed">
						A los diecisiete años, Paulina descubrió en la escritura su terapia contra el caos, aventurándose a crear su primera novela.
						Hoy, continúa forjando los siguientes libros de la saga A Flor de Piel.
					</p>
					<p class="text-gray-300 mb-6 italic border-l-2 border-gold pl-4">
						"Un arma debe ser capaz de inspirarnos seguridad en los momentos más desesperantes..."
					</p>
					
                    <div class="flex gap-4 flex-wrap">
						<a href="https://www.instagram.com/paulinalexandraa/" target="_blank" class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-gray-400 hover:bg-gradient-to-br hover:from-purple-600 hover:to-orange-500 hover:text-white transition duration-300 transform hover:-translate-y-1 hover:border-transparent">
							<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
						</a>
						
                        <a href="https://www.facebook.com/profile.php?id=61570426830815" target="_blank" class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-gray-400 hover:bg-blue-600 hover:text-white transition duration-300 transform hover:-translate-y-1 hover:border-transparent">
							<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
						</a>

                        <a href="https://www.tiktok.com/@paulinalexandraa" target="_blank" class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-gray-400 hover:bg-[#000000] hover:text-white hover:border-white/20 transition duration-300 transform hover:-translate-y-1">
							<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z"/>
                            </svg>
						</a>

                        <a href="https://www.wattpad.com/user/paulinalexandra" target="_blank" class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-gray-400 hover:bg-[#FF6122] hover:text-white transition duration-300 transform hover:-translate-y-1 hover:border-transparent">
							<svg class="w-6 h-6" viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
								<path d="M6.8779,13.2081c-3.0774,5.7217-3.0943,14.3235-.476,19.45s7.51,12.66,16.4038-7.3294c-.1159,8.79,7.2908,14.1328,11,4.9654s6.3153-11.8076,8.1392-14.1787C46.6031,10.06,40.1837,6.7544,30.8013,18.57,30.6023,10.087,26.8037,2.82,14.937,20.2836,17.0594,12.562,11.1511,6.3939,6.8779,13.2081Z"></path>
							</svg>
						</a>

                        <a href="mailto:paulinaalexandra020@gmail.com" class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-gray-400 hover:bg-[#EA4335] hover:text-white transition duration-300 transform hover:-translate-y-1 hover:border-transparent">
							<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
								<path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/>
							</svg>
						</a>
					</div>
				</div>
			</div>
		</div>
	</section>

	<footer class="bg-midnight py-8 mt-12">
	<div class="container mx-auto px-6 mt-12 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center text-gray-600 text-xs gap-4">
			
			<p>
				&copy; {new Date().getFullYear()} Paulina López. Todos los derechos reservados.
			</p>

			<p class="flex items-center gap-1">
				Developed by 
				<a 
					href="https://www.hikevodesign.com" 
					target="_blank" 
					rel="noopener noreferrer"
					class="text-gray-400 hover:text-gold font-bold transition-colors duration-300 tracking-wide"
				>
					Hikevo Design
				</a>
			</p>
			
		</div>
	</footer>

</Layout>

<script>
	// Scripts de Animación GSAP (Solo se ejecutan en el cliente)
	import { gsap } from "gsap";
	import { ScrollTrigger } from "gsap/ScrollTrigger";
	
	gsap.registerPlugin(ScrollTrigger);

	// Animación de Entrada (Hero)
	const tl = gsap.timeline();
	tl.to(".intro-anim", {
		y: 0,
		opacity: 1,
		duration: 1,
		stagger: 0.2,
		ease: "power3.out"
	});

	// Animación al hacer Scroll (Fade Up)
	gsap.utils.toArray('.gsap-fade-up').forEach((elem: any) => {
		gsap.from(elem, {
			scrollTrigger: {
				trigger: elem,
				start: "top 80%",
			},
			y: 50,
			opacity: 0,
			duration: 1,
			ease: "power3.out"
		});
	});
</script>

<style>
	/* Efecto de sombra para texto */
	.text-shadow-lg {
		text-shadow: 0 4px 30px rgba(0,0,0,0.5);
	}
</style>